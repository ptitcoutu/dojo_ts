// see https://adventofcode.com/2020/day/3
const allRowsD3 = [
  "....##..#........##...#.#..#.##",
  ".#.#..#....##....#...#..##.....",
  "##.#..##..#...#..........##.#..",
  ".#.##.####..#......###.........",
  "#.#.#...........#.....#...#....",
  "#.......#....#.#.##..###..##..#",
  ".#...#...##....#.........#.....",
  "..........##.#.#.....#....#.#..",
  ".......##..##...#.#.#...#......",
  ".#.#.#...#...##...#.##.##..#...",
  "........##.#.#.###.........##..",
  "#.#..#.#.#.....#...#...#......#",
  ".#.#.#...##......#...#.........",
  ".#..##.##.#...#...##....#.#....",
  ".##...#..#..#......##.###....##",
  ".....#...#.###.....#.#.........",
  "#.##..#....#.#.#.#.............",
  "........#...#......#...#..#....",
  "##..##...##.##...#...#.###...##",
  "#.#....##.#...###......#..#.#..",
  "..#.....#.##......#..........#.",
  "#.......#..#......#.....#....#.",
  ".....###...........#....#.##...",
  "#.#........##.......#.#...#.##.",
  ".#.#.#........#........#.#.....",
  "#..#..##.....#.###..#.#.#.##..#",
  "..#.#...#..##.#.#.#.......###..",
  "........#........#..#..#...#...",
  "##............#...#..##.##...#.",
  "#....#.#.....##...#............",
  "............#...#..#.#.#....#..",
  "#.#.#...##.##.#....#....#......",
  "................###.....#.....#",
  "##.#####.#..#...###..#...###...",
  "...#.....#...#.#....#...#..#...",
  ".......#....##.##.#.##.........",
  "..#..#..##.....#...#.#.....#...",
  "...#...#.#.##.#..###.......#...",
  "...#...........#.#####..##..#..",
  "#.#...#........####..#......#.#",
  "#..#.##...........#.#......#.##",
  "#.#..#....##..#..##.#..........",
  ".....#..#.....#........##..#...",
  "...###.......#.##.......#......",
  "...##..#..#...#....#.###...#...",
  "....####....#........#.##.#.#.#",
  "#....#.....#.###.##...##..##.##",
  ".##.#...#.##.#......#..##.#....",
  "...#.............#.............",
  "..##..##.#.....#........##....#",
  "#.....#....#.......####...#..#.",
  "..#...#..#...#...##.#....##....",
  ".#...##....#....#..#....#......",
  "##..#.#...##......#..#.......##",
  "..#...#.##..#.....#.#...#..#.#.",
  "#..##....#..........#..........",
  ".#........#..#......#......#.#.",
  "...##.#.........#.#....#.#...#.",
  "#.....#.#..#...#...#..#...#...#",
  "#.........#.#.........##.......",
  ".#.......#......#.........###..",
  ".#..#..##...........#.....#..#.",
  ".#....................#.....#..",
  ".##.....#....#....#.###.....#..",
  "...##.#.....#.#....#.........#.",
  ".........##.....#.....#.##..#..",
  "......#......#.#..#..###...#..#",
  "..##...#.#..#...#.#....#.......",
  "..#..##.###.#..#..#..#......#..",
  ".....##...##.........#...##...#",
  "###.#..##....##...##.#..###....",
  "#...#.#..##......##...#.#..#...",
  "..........#....###....#........",
  "#.#.#.#.#.....#..##.##.....#...",
  ".##.....#...#.....#......#.....",
  ".#..........#.#.............#..",
  ".#..##..#.#..##...#....#.##...#",
  "..#.#..........#...#..........#",
  ".#.......#.......#...#..#.....#",
  "##.#...##...#......#.#..#......",
  "#####..#....#..#...#...#.#.....",
  "....#.......#.#..#.............",
  "#..#..#.#.####...#....#....##..",
  "#..#.##.#......#...#......#....",
  "#...##.##...#....#..........##.",
  "..#..#.......##.#....#...#.#...",
  ".....#.##..............##.....#",
  "..##.##...##.....#.........#.#.",
  ".#....##...##...##..#....##..#.",
  ".#...#....#..#......#.#........",
  "#....#.#.#..............#....##",
  "..##..#..#....#####.#....#.#.##",
  "#....#...#.##..#.##.........###",
  "#..#..#....#...............#.#.",
  "#....##...##........##.##.#.##.",
  "......#......##....##.....#.###",
  "#...##..#..#.....#.#........##.",
  "..#.#.##...#...#....#..###...#.",
  "#..##..#.###..##.#.#....#......",
  "..###..#.##........###.....#...",
  "#.............#.............#..",
  ".#.##....#..##.#...#....#.#####",
  "###.....###.#......##..#..##...",
  ".#.#......##.#....#....#.#..#..",
  "###..#..#....#......###.##.....",
  "......#.......#......#..##..##.",
  "..#..#...#..#....#.##....#.#..#",
  ".......##..#........#.#.##.....",
  ".#...#..#........#..#.#..#..#.#",
  ".#..#.##.......#......#...#.#..",
  ".##..##......##.#...#......####",
  ".....#....#......#.....#......#",
  "..........#.#.#...##.#..#.#....",
  "...#.......##......#..#.#.##...",
  ".###..#.#.#....................",
  "##...#...#.##............#.....",
  "....#....#.##...#..#.#...##....",
  "..#.#....#.###...#...#.#.####.#",
  "..#..#.#...#.#......##.........",
  "#..#..####.##.#.#..###....#...#",
  "....#..........#.##.#..#.#.#.#.",
  "#.#.##.........#.....##...#..##",
  "#......#...#.##.#......#..#.#..",
  "#...#........#..#..#...##...#..",
  ".....#.####..##..#.#.##..#...#.",
  "#..#........#........#...#....#",
  "...........#..#.....#.#.#.#....",
  "....#......#....#...#....##....",
  ".#.#..#...#.#....#..#.#....##.#",
  "....#...#...#.##..#...#..##...#",
  "#######...............##.....##",
  ".#.#..............#....#..#.###",
  "#......#.#......###....###.....",
  "##..#...#.##..##..##.#....#....",
  "#....##..#..#...#.#.#...#......",
  "..........#..#.##..##.##.#..##.",
  "....#.#.#.....##........#..#...",
  "..###...#.....##.##.....##..##.",
  "....#.#..#.#.......#.......#...",
  "..##.#..#.....##...###...#...#.",
  "..#.........#...##...#...#..#..",
  "..#..#..#..#..##.#...##..#.#...",
  "...##..#..##..#..####...#.....#",
  "............#............###...",
  ".#.#.###.#.....#.#.#..#.###..#.",
  "...#.........#.....####........",
  "....##.#..##.#.............#...",
  "....#.##.....#..#.....#......##",
  "..........#.............#...##.",
  "#..#.....#.......##..###.......",
  "..##.#...........#.......#..#..",
  "...#...#.#.##.###....#.#..#....",
  "...#..........##..#..#..#...###",
  ".........#.....#..##.....#..#..",
  "#........#...#...#..#.#....##..",
  ".#.#.....####..#.##.#..........",
  "###.......##..#.##...#.....#...",
  "..###.##.#..#..#..#.....##...#.",
  ".........#.....##.#..#..##.....",
  "#..#..##...###..............#..",
  "#....#.#....#..#.....#..####...",
  "####..#.....##...#..#.#.#.#...#",
  "...#....#.....#.##.#.#.#....##.",
  "..........#...#.....###....#.##",
  "#....#.#.#....#..#..#.....#....",
  ".....#.#...#......#....#......#",
  ".####....##...#...#......##..#.",
  ".#...#..#....#..#..............",
  "##.#...##...#.##..#......#.....",
  "..####.##..#....#.#......#.#.##",
  "........#.....##...#.#..##....#",
  "....#.#.#.#.###...#.#...##...##",
  "#.....#...####.#....#.#........",
  "..#.....#...##.........###.....",
  "....#....#....#..#......#####.#",
  "###.....#..#.#.#......#.##.#...",
  "....#.##......#..#.#...........",
  ".#....#....#.#..#.......#...##.",
  "...................#.#.#..#....",
  "##...#.....#........#....#...#.",
  "........##......#...##.#..#.#.#",
  "#.#..###...#....#.#...#.......#",
  "#..........##......#..#..#.....",
  ".............#...##.#...#......",
  "#..#....##..#.........#..#.###.",
  ".....#..........#....##.#...##.",
  "###....................#.#.##..",
  "#........##...##......#....###.",
  "#....#.............#....#...#..",
  "##.......##.#.......#....#..#..",
  "##...#............#..#.#....##.",
  "..#.#..#...#####..........#....",
  "..#.........##.....#.#...####..",
  "....#..............#...........",
  "..#...#.#.#..#.......##.#.#.#..",
  "....#.##.....##..#.....#..####.",
  "#...#...#...#.......#.........#",
  "......#..#.####...###.#.#.....#",
  ".......#..#..#.....#.#..##.#..#",
  ".#......##..#............#.....",
  ".#........#.#....#....#........",
  ".....#.#..#.##.#..##....#..#...",
  "#.#...........#....##.....#....",
  "..#..#..##.###..##..#..###.#.##",
  "##.#..#...##.#.........#...#.#.",
  "......#..#..##...#....#...#.##.",
  "#.##.......................#...",
  ".......#..#..#.##..##......#...",
  "..#.#...#.....#..###....#...#..",
  "##..#.....#..#..#.##.....#...##",
  "#...##...###...#.#..###....#...",
  "...#.#.#..####.....#...##....#.",
  ".#.#..##.....#..#.....##..##..#",
  "#...#..........#.##.#.#........",
  "..##....#.##....#..##......#...",
  "....#..........###.....####..##",
  "...........###....##.#.#.#.#...",
  "...#......................####.",
  "#.#.#...#.#.#.#.#......#.....##",
  "..###...#.####...#..##..#....#.",
  "....#....#.......#...#.........",
  ".#.###.............##..#...#...",
  "....#.#....##...#.....#.##.....",
  "#.......##.....#.#.....#....##.",
  "....##.....###..#.#..#....#...#",
  "......#..##...#......#.....#.##",
  ".#.....#.##.###....#.....#..###",
  "...#..#.###.#....#..#..#...##.#",
  "...##..#...#..#.#.#..#...#.....",
  "##.####...##..#.#.#....#.......",
  "..##..#.#.......##.#......##.#.",
  "....##....#....#..#....#..##.#.",
  "..##..........##....#...#.#..#.",
  "#.#...#.#.###.#.#..##.#...#....",
  ".....#..#.............#...#...#",
  "....#.#..#...##...#....#.##....",
  "#..#...#.###.....#...#.....#.#.",
  "#####....#....#....#.......#.##",
  "#...##....##.#.#...#.....##.#..",
  "#.......#...#..#..#...#....#...",
  "....#......#.#..........#....##",
  "#.###...#.#..##..#.##........#.",
  "#..#.....##.......#..#..#.#....",
  "...#...#.##...#....#.#.#.#...#.",
  "...##..#.#....#......###......#",
  "#.#....#...#..#..#....#........",
  "..#..#.#...##..........#.###...",
  "#..........#...#..#....#....###",
  "..#..#.#....#..............#...",
  "...#........#...#.#....###.#..#",
  "....#.#.#................#..#.#",
  "..#........##.#....#.#..#......",
  "...##..#..#.......#..#......#.#",
  "..#..#....#.........#....#.##..",
  "#.....#....###.#..#..#...#...#.",
  "..#..##.###.#..##....#.###.....",
  "...#...####..#........###.#....",
  ".........#.#...#..#..#.#.......",
  ".##.........##.#..............#",
  "..#.#.#.....###........#.#.#..#",
  "....##..#....#....#.#..#.......",
  "#.#.....#...#........##........",
  ".##.#.#..#..#.#.#.........#....",
  "#.....#..#.##...#...#..........",
  "##..#....#....##.#..#.........#",
  "................#.##.#......#.#",
  "..#..#.#........##...###..#...#",
  "##........#.......#...##.##..#.",
  "##....#.....#..##....#.......#.",
  "#.#....#.#........#..#.........",
  "......##......#...#.....#.##...",
  "###....#..........##.#.#......#",
  "......#...###.........###..#...",
  ".####....#...##..#.#.....#...#.",
  ".##...#...###....#...#.#..###..",
  "#..#......##...#.###..###...#..",
  "#....#.#.#..#....##...#.##..#..",
  "..#.....#...#..........#.##.###",
  "#.....#....###.......##..##.#..",
  "#..##...#..#....#.###......#...",
  "#..#........##..#.....#.#.#....",
  "#.##.#.#..#....#.#.............",
  ".#...............#....##.......",
  ".#.##......##........#...#..#.#",
  ".#...#....#....#...#..#...##...",
  ".....#..###...##........#.#....",
  "...#.......#....##..#..#....#..",
  "...###....#........#..#.###.#..",
  "......##..##..............###.#",
  ".......#.####..##....#.#....#..",
  "#...#......#...#..#.....##....#",
  ".#..#..###....#..##.##.#.......",
  "#......##......#..##....#..##..",
  ".....#..#.#......##.##..##.....",
  "...#..#.......#......#.........",
  "....#..####......#..#....#...#.",
  "..#.#..#...#....#....#.......#.",
  "####..#........#.###...##.#.#.#",
  ".......##........#.#.#...##....",
  "...#.........#..#.#..##....#...",
  ".....#..#...#.#....#...#.#.##.#",
  "#..##.....#.....##.......#...#.",
  ".......##.#.#.....#....#......#",
  "...#...#.##...#......#....#....",
  "..#..#.#...#..#.....#...###.#..",
  ".........#...#..#.......##.....",
  "..##...................#..#.###",
  ".##.##..#.#...#.#....#.....##..",
  "#.#...##...#...#...##..#......#",
  "....#..#...#.....##.#.....#..##",
  "##.#..........###..#...#..#....",
  "...##....#.##....#......#......",
  ".....#.........#....#.#.......#",
  ".......#............#.#.....#..",
  "..#..#...#..#####..#....##.....",
  "...##......##...#.#........##..",
  ".....#..###...##.#.#.##.#...#..",
  "..#.#.#..##..#.##...##.#.#.....",
  "......##...#..##......#.#......",
  "......................#........",
  "#...#..#....#..#.#.##.#.....#.#",
  ".#......#.#....#.#.#..#....#...",
  ".#..#.#.#..#....#..............",
];
const nbColumnsD3_2 = allRowsD3[0].length;
const treeSymbolD3_2 = "#";
type Slope = {right: number, down: 1}
const slopes = [{right: 1, down: 1},{right: 3, down: 1},{right: 5, down: 1},{right: 7, down: 1},{right: 7, down: 2}]
const nbEncouteredTreesD3_2 = slopes.map( slope => allRowsD3.reduce((acc, currentValue, currentIndex) => {
  if (currentIndex == 0) {
    return 0;
  } else if (currentIndex % slope.down == 0) {
    const columnIndex = ((currentIndex / slope.down) * slope.right) % nbColumnsD3_2
    const treeEncountered = currentValue.charAt(columnIndex) === treeSymbolD3_2
    const totalEncounteredTrees = treeEncountered ? acc + 1 : acc
    console.log(slope, {row:currentIndex, column:columnIndex}, treeEncountered, totalEncounteredTrees)
    return totalEncounteredTrees;
  } else {
    return acc;
  }
}, 0));

console.log(nbEncouteredTreesD3_2);
console.log(nbEncouteredTreesD3_2.reduce((acc, currentValue)=> acc*currentValue, 1));

// there's still a bug because the answer seems to be too low : 4438606536...